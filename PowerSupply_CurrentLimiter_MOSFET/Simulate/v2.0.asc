Version 4.1
SHEET 1 884 948
WIRE -240 176 -240 144
WIRE -112 176 -240 176
WIRE 64 176 -32 176
WIRE 480 176 480 128
WIRE 480 176 256 176
WIRE -240 208 -240 176
WIRE 480 256 480 176
WIRE 64 272 16 272
WIRE 320 272 256 272
WIRE 16 320 16 272
WIRE -240 336 -240 288
WIRE 320 336 320 272
WIRE 480 384 480 336
WIRE 320 464 320 416
WIRE 320 464 176 464
WIRE 432 464 320 464
WIRE 176 480 176 464
WIRE 320 528 320 464
WIRE 480 576 480 480
WIRE 480 576 384 576
WIRE -112 608 -112 576
WIRE 176 608 176 560
WIRE 480 624 480 576
WIRE -112 736 -112 688
WIRE 320 736 320 624
WIRE 480 736 480 704
WIRE 480 736 320 736
WIRE 480 800 480 736
FLAG -112 736 0
FLAG 480 800 0
FLAG 176 608 0
FLAG -112 576 VDD
FLAG 480 128 VDD
FLAG 16 320 0
FLAG -240 336 0
FLAG -240 144 IN
SYMBOL voltage -112 592 R0
WINDOW 0 -70 43 Left 2
WINDOW 3 -69 68 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL res 336 432 R180
WINDOW 0 48 64 Left 2
WINDOW 3 48 40 Left 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL npn 384 528 M0
WINDOW 0 93 9 VRight 2
WINDOW 3 116 8 VRight 2
SYMATTR InstName Q2
SYMATTR Value BC337-40
SYMBOL res 496 720 R180
WINDOW 0 48 64 Left 2
WINDOW 3 48 40 Left 2
SYMATTR InstName R2
SYMATTR Value 0.35
SYMBOL res 464 240 R0
SYMATTR InstName LOAD
SYMATTR Value 2
SYMBOL nmos 432 384 R0
SYMATTR InstName M1
SYMATTR Value PSMN1R025YLD
SYMBOL res 192 576 R180
WINDOW 0 48 64 Left 2
WINDOW 3 48 40 Left 2
SYMATTR InstName R3
SYMATTR Value 47k
SYMBOL Optos\\PC817A 160 224 R0
SYMATTR InstName U1
SYMBOL res -16 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 330
SYMBOL voltage -240 192 R0
WINDOW 0 41 37 Left 2
WINDOW 3 -45 -10 VRight 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 0 1m 1m 0.5s 1s 1)
TEXT -64 688 Left 2 !.tran 1000m
TEXT 520 640 Left 2 ;0.7v / Curent = R\n0.7v /2A = R = 0.35
