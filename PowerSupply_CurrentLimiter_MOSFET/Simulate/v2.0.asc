Version 4.1
SHEET 1 884 964
WIRE 480 224 480 128
WIRE 256 240 256 176
WIRE -304 368 -304 336
WIRE -176 368 -304 368
WIRE 0 368 -96 368
WIRE 256 368 256 320
WIRE 256 368 192 368
WIRE 480 384 480 304
WIRE -304 400 -304 368
WIRE 0 464 -48 464
WIRE 256 464 192 464
WIRE 368 464 256 464
WIRE 432 464 368 464
WIRE 368 480 368 464
WIRE -48 512 -48 464
WIRE -304 528 -304 480
WIRE 368 608 368 560
WIRE 256 672 256 464
WIRE 480 720 480 480
WIRE 480 720 320 720
WIRE -224 752 -224 720
WIRE 480 752 480 720
WIRE -224 880 -224 832
WIRE 256 880 256 768
WIRE 480 880 480 832
WIRE 480 880 256 880
WIRE 480 944 480 880
FLAG -224 880 0
FLAG 480 944 0
FLAG 368 608 0
FLAG -224 720 VDD
FLAG 480 128 VDD
FLAG -48 512 0
FLAG -304 528 0
FLAG -304 336 IN
FLAG 256 176 VDD
SYMBOL voltage -224 736 R0
WINDOW 0 -70 43 Left 2
WINDOW 3 -69 68 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL res 272 336 R180
WINDOW 0 48 64 Left 2
WINDOW 3 48 40 Left 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL npn 320 672 M0
WINDOW 0 87 29 Left 2
WINDOW 3 88 62 Left 2
SYMATTR InstName Q2
SYMATTR Value BC337-40
SYMBOL res 496 848 R180
WINDOW 0 48 64 Left 2
WINDOW 3 48 40 Left 2
SYMATTR InstName R2
SYMATTR Value 0.35
SYMBOL res 464 208 R0
SYMATTR InstName LOAD
SYMATTR Value 2
SYMBOL nmos 432 384 R0
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M1
SYMATTR Value PSMN1R025YLD
SYMBOL res 384 576 R180
WINDOW 0 48 64 Left 2
WINDOW 3 48 40 Left 2
SYMATTR InstName R3
SYMATTR Value 47k
SYMBOL Optos\\PC817A 96 416 R0
SYMATTR InstName U1
SYMBOL res -80 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 330
SYMBOL voltage -304 384 R0
WINDOW 0 41 37 Left 2
WINDOW 3 -45 -10 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 0 {0.01/Fs} {0.01/Fs} {0.5/Fs} {1/Fs} 1)
TEXT -176 832 Left 2 !.tran {1/Fs}
TEXT 520 784 Left 2 ;0.7v / Curent = R\n0.7v /2A = R = 0.35
TEXT -280 488 Left 2 !.param Fs=1kHz
